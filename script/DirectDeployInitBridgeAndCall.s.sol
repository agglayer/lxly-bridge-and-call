pragma solidity 0.8.20;

import "forge-std/Script.sol";

contract DirectDeployInitBridgeAndCall is Script {
    address create2Deployer = 0x4e59b44847b379578588920cA78FbF26c0B4956C;

    address expectedProxy = 0x64B20Eb25AEd030FD510EF93B9135278B152f6a6;
    address expectedImpl = 0x7bAbf98Cb7cbD2C85F13813409f495B9cF0Dd7D0;

    function run() external {
        // Check prerequisites
        require(create2Deployer.code.length != 0, "No create2 deployer.");

        vm.startBroadcast(vm.envUint("DEPLOYER_PRIVATE_KEY"));

        if (expectedImpl.code.length == 0) {
            (bool _successImpl, bytes memory _resImpl) = create2Deployer.call(
                hex"000000000000000000000000000000000000000000000000000000000000000160a060405234801561000f575f80fd5b506040516125f63803806125f683398101604081905261002e9161003f565b6001600160a01b031660805261006c565b5f6020828403121561004f575f80fd5b81516001600160a01b0381168114610065575f80fd5b9392505050565b6080516124da61011c5f395f8181607e0152818160c70152818161015201528181610253015281816102c50152818161036b0152818161067d015281816107360152818161081c0152818161089f0152818161095d015281816109de01528181610aaf01528181610be901528181610c6a01528181610ced01528181610db001528181610e4201528181610ec501528181610f5d015281816110410152818161119501526111fc01526124da5ff3fe60806040526004361062000037575f3560e01c80631806b5f2146200003b578063ddcf54881462000054578063e78cea92146200006b575b5f80fd5b620000526200004c36600462001559565b620000bc565b005b6200005262000065366004620015d0565b620002c2565b34801562000077575f80fd5b50620000a07f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b03909116815260200160405180910390f35b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016146200010657604051636ec8e0c160e11b815260040160405180910390fd5b6001600160a01b03841630146200013057604051630e9082bd60e01b815260040160405180910390fd5b5f8080808080620001448789018962001697565b9550955095509550955095507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663cc461632878b6040518363ffffffff1660e01b8152600401620001b192919063ffffffff92831681529116602082015260400190565b602060405180830381865afa158015620001cd573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190620001f39190620017a5565b6200021157604051630baa41dd60e31b815260040160405180910390fd5b85896040516020016200023b92919091825260e01b6001600160e01b031916602082015260240190565b604051602081830303815290604052805190602001207f000000000000000000000000000000000000000000000000000000000000000084848888866040516200028590620014d9565b62000296969594939291906200181b565b8190604051809103905ff5905080158015620002b4573d5f803e3d5ffd5b505050505050505050505050565b5f7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316632dfdf0b56040518163ffffffff1660e01b8152600401602060405180830381865afa15801562000320573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019062000346919062001870565b620003539060016200189c565b90506001600160a01b038916158015906200040157507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316634b2f336d6040518163ffffffff1660e01b8152600401602060405180830381865afa158015620003c6573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190620003ec9190620018b8565b6001600160a01b0316896001600160a01b0316145b1562000520576040516370a0823160e01b81523060048201525f906001600160a01b038b16906370a0823190602401602060405180830381865afa1580156200044c573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019062000472919062001870565b90506200048b6001600160a01b038b1633308c62000b27565b6040516370a0823160e01b81523060048201525f906001600160a01b038c16906370a0823190602401602060405180830381865afa158015620004d0573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190620004f6919062001870565b9050620005048282620018d6565b9950620005188b8b8b8b8b8b8b8a62000b89565b50506200067b565b6001600160a01b0389166200056757873414620005505760405163b89240f560e01b815260040160405180910390fd5b620005618888888888888762000c62565b6200067b565b6040516370a0823160e01b81523060048201525f906001600160a01b038b16906370a0823190602401602060405180830381865afa158015620005ac573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190620005d2919062001870565b9050620005eb6001600160a01b038b1633308c62000b27565b6040516370a0823160e01b81523060048201525f906001600160a01b038c16906370a0823190602401602060405180830381865afa15801562000630573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019062000656919062001870565b9050620006648282620018d6565b9950620006788b8b8b8b8b8b8b8a62000e1d565b50505b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316632dfdf0b56040518163ffffffff1660e01b8152600401602060405180830381865afa158015620006d8573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190620006fe919062001870565b81146200071e576040516336cbe6ed60e11b815260040160405180910390fd5b60606001600160a01b038a1615801590620007cc57507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316634b2f336d6040518163ffffffff1660e01b8152600401602060405180830381865afa15801562000791573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190620007b79190620018b8565b6001600160a01b03168a6001600160a01b0316145b1562000808578187875f808989604051602001620007f1979695949392919062001914565b604051602081830303815290604052905062000a98565b6001600160a01b038a166200093a578187877f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316633cbc795b6040518163ffffffff1660e01b8152600401602060405180830381865afa15801562000877573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906200089d919062001966565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316633c351e106040518163ffffffff1660e01b8152600401602060405180830381865afa158015620008fa573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190620009209190620018b8565b8989604051602001620007f1979695949392919062001984565b60405163318aee3d60e01b81526001600160a01b038b811660048301525f9182917f0000000000000000000000000000000000000000000000000000000000000000169063318aee3d906024016040805180830381865afa158015620009a2573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190620009c89190620019cc565b90925090506001600160a01b03811662000a65577f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663bab161bf6040518163ffffffff1660e01b8152600401602060405180830381865afa15801562000a39573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019062000a5f919062001966565b91508b90505b83898984848b8b60405160200162000a84979695949392919062001984565b604051602081830303815290604052925050505b604051630481fe6f60e31b81526001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063240ff3789062000aec908b9030908890879060040162001a09565b5f604051808303815f87803b15801562000b04575f80fd5b505af115801562000b17573d5f803e3d5ffd5b5050505050505050505050505050565b604080516001600160a01b0385811660248301528416604482015260648082018490528251808303909101815260849091019091526020810180516001600160e01b03166323b872dd60e01b17905262000b8390859062001082565b50505050565b5f62000bcf825f80898989898080601f0160208091040260200160405190810160405280939291908181526020018383808284375f920191909152506200116592505050565b60405163cd58657960e01b81529091506001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063cd5865799062000c28908a9085908d908f905f9060040162001a4c565b5f604051808303815f87803b15801562000c40575f80fd5b505af115801562000c53573d5f803e3d5ffd5b50505050505050505050505050565b5f62000dac827f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316633cbc795b6040518163ffffffff1660e01b8152600401602060405180830381865afa15801562000cc5573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019062000ceb919062001966565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316633c351e106040518163ffffffff1660e01b8152600401602060405180830381865afa15801562000d48573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019062000d6e9190620018b8565b898989898080601f0160208091040260200160405190810160405280939291908181526020018383808284375f920191909152506200116592505050565b90507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663cd5865798989848c5f806040518763ffffffff1660e01b815260040162000e0595949392919062001a4c565b5f604051808303818588803b15801562000c40575f80fd5b60405163318aee3d60e01b81526001600160a01b0389811660048301525f91829182917f00000000000000000000000000000000000000000000000000000000000000009091169063318aee3d906024016040805180830381865afa15801562000e89573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019062000eaf9190620019cc565b90925090506001600160a01b03811662000fe2577f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663bab161bf6040518163ffffffff1660e01b8152600401602060405180830381865afa15801562000f20573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019062000f46919062001966565b60405163095ea7b360e01b81526001600160a01b037f000000000000000000000000000000000000000000000000000000000000000081166004830152602482018d90529193508c92509082169063095ea7b3906044016020604051808303815f875af115801562000fba573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019062000fe09190620017a5565b505b620010278483838b8b8b8b8080601f0160208091040260200160405190810160405280939291908181526020018383808284375f920191909152506200116592505050565b60405163cd58657960e01b81529093506001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016925063cd586579915062000c28908a9085908d908f905f9060040162001a4c565b5f620010d8826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166200133c9092919063ffffffff16565b905080515f1480620010fb575080806020019051810190620010fb9190620017a5565b620011605760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b60648201526084015b60405180910390fd5b505050565b5f80604051806020016200117990620014d9565b601f1982820381018352601f909101166040819052620011c8907f0000000000000000000000000000000000000000000000000000000000000000908a908a908a908a908a906020016200181b565b60408051601f1981840301815290829052620011e8929160200162001a92565b60405160208183030381529060405290505f7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663bab161bf6040518163ffffffff1660e01b8152600401602060405180830381865afa15801562001257573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906200127d919062001966565b90505f60ff60f81b308b84604051602001620012b092919091825260e01b6001600160e01b031916602082015260240190565b6040516020818303038152906040528051906020012085805190602001206040516020016200131694939291906001600160f81b031994909416845260609290921b6bffffffffffffffffffffffff191660018401526015830152603582015260550190565b60408051808303601f1901815291905280516020909101209a9950505050505050505050565b60606200134c84845f8562001354565b949350505050565b606082471015620013b75760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b606482015260840162001157565b5f80866001600160a01b03168587604051620013d4919062001ac4565b5f6040518083038185875af1925050503d805f811462001410576040519150601f19603f3d011682016040523d82523d5f602084013e62001415565b606091505b5091509150620014288783838762001433565b979650505050505050565b60608315620014a65782515f036200149e576001600160a01b0385163b6200149e5760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640162001157565b50816200134c565b6200134c8383815115620014bd5781518083602001fd5b8060405162461bcd60e51b815260040162001157919062001ae1565b6109af8062001af683390190565b6001600160a01b0381168114620014fc575f80fd5b50565b63ffffffff81168114620014fc575f80fd5b5f8083601f84011262001522575f80fd5b50813567ffffffffffffffff8111156200153a575f80fd5b60208301915083602082850101111562001552575f80fd5b9250929050565b5f805f80606085870312156200156d575f80fd5b84356200157a81620014e7565b935060208501356200158c81620014ff565b9250604085013567ffffffffffffffff811115620015a8575f80fd5b620015b68782880162001511565b95989497509550505050565b8015158114620014fc575f80fd5b5f805f805f805f8060e0898b031215620015e8575f80fd5b8835620015f581620014e7565b97506020890135965060408901356200160e81620014ff565b955060608901356200162081620014e7565b945060808901356200163281620014e7565b935060a089013567ffffffffffffffff8111156200164e575f80fd5b6200165c8b828c0162001511565b90945092505060c08901356200167281620015c2565b809150509295985092959890939650565b634e487b7160e01b5f52604160045260245ffd5b5f805f805f8060c08789031215620016ad575f80fd5b863595506020870135620016c181620014e7565b94506040870135620016d381620014e7565b93506060870135620016e581620014ff565b92506080870135620016f781620014e7565b915060a087013567ffffffffffffffff8082111562001714575f80fd5b818901915089601f83011262001728575f80fd5b8135818111156200173d576200173d62001683565b604051601f8201601f19908116603f0116810190838211818310171562001768576200176862001683565b816040528281528c602084870101111562001781575f80fd5b826020860160208301375f6020848301015280955050505050509295509295509295565b5f60208284031215620017b6575f80fd5b8151620017c381620015c2565b9392505050565b5f5b83811015620017e6578181015183820152602001620017cc565b50505f910152565b5f815180845262001807816020860160208601620017ca565b601f01601f19169290920160200192915050565b6001600160a01b03878116825263ffffffff87166020830152858116604083015284811660608301528316608082015260c060a082018190525f906200186490830184620017ee565b98975050505050505050565b5f6020828403121562001881575f80fd5b5051919050565b634e487b7160e01b5f52601160045260245ffd5b80820180821115620018b257620018b262001888565b92915050565b5f60208284031215620018c9575f80fd5b8151620017c381620014e7565b81810381811115620018b257620018b262001888565b81835281816020850137505f828201602090810191909152601f909101601f19169091010190565b8781526001600160a01b038781166020830152868116604083015260ff861660608301528416608082015260c060a082018190525f90620019599083018486620018ec565b9998505050505050505050565b5f6020828403121562001977575f80fd5b8151620017c381620014ff565b8781526001600160a01b038781166020830152868116604083015263ffffffff861660608301528416608082015260c060a082018190525f90620019599083018486620018ec565b5f8060408385031215620019de575f80fd5b8251620019eb81620014ff565b6020840151909250620019fe81620014e7565b809150509250929050565b63ffffffff851681526001600160a01b038416602082015282151560408201526080606082018190525f9062001a4290830184620017ee565b9695505050505050565b63ffffffff9590951685526001600160a01b039384166020860152604085019290925290911660608301521515608082015260c060a082018190525f9082015260e00190565b5f835162001aa5818460208801620017ca565b83519083019062001abb818360208801620017ca565b01949350505050565b5f825162001ad7818460208701620017ca565b9190910192915050565b602081525f620017c36020830184620017ee56fe60806040526040516109af3803806109af833981016040819052610022916107ec565b855f6001600160a01b03861661009957816001600160a01b0316634b2f336d6040518163ffffffff1660e01b8152600401602060405180830381865afa15801561006e573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061009291906108f0565b90506102b5565b816001600160a01b0316633c351e106040518163ffffffff1660e01b8152600401602060405180830381865afa1580156100d5573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906100f991906108f0565b6001600160a01b0316866001600160a01b03161480156101835750816001600160a01b0316633cbc795b6040518163ffffffff1660e01b8152600401602060405180830381865afa158015610150573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906101749190610912565b63ffffffff168763ffffffff16145b6102b557816001600160a01b031663bab161bf6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156101c3573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906101e79190610912565b63ffffffff168763ffffffff16036102005750846102b5565b6040516001600160e01b031960e089901b1660208201526001600160601b0319606088901b1660248201526001600160a01b038316906381b1c17490603801604051602081830303815290604052805190602001206040518263ffffffff1660e01b815260040161027391815260200190565b602060405180830381865afa15801561028e573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906102b291906108f0565b90505b6001600160a01b03811661037a575f4790505f866001600160a01b031682866040516102e1919061092b565b5f6040518083038185875af1925050503d805f811461031b576040519150601f19603f3d011682016040523d82523d5f602084013e610320565b606091505b5050905080610378576040516001600160a01b0387169083905f81818185875af1925050503d805f811461036f576040519150601f19603f3d011682016040523d82523d5f602084013e610374565b606091505b5050505b005b6040516370a0823160e01b81523060048201525f906001600160a01b038316906370a0823190602401602060405180830381865afa1580156103be573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906103e29190610946565b60405163095ea7b360e01b81526001600160a01b038881166004830152602482018390529192509083169063095ea7b3906044016020604051808303815f875af1158015610432573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610456919061095d565b505f866001600160a01b031685604051610470919061092b565b5f604051808303815f865af19150503d805f81146104a9576040519150601f19603f3d011682016040523d82523d5f602084013e6104ae565b606091505b5050905080610378576103786001600160a01b03841687846040516001600160a01b03831660248201526044810182905261052990849063a9059cbb60e01b9060640160408051808303601f190181529190526020810180516001600160e01b0319939093166001600160e01b039384161790529061052e16565b505050565b6040805180820190915260208082527f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564908201525f9061057a906001600160a01b0385169084906105fc565b8051909150156105295780806020019051810190610598919061095d565b6105295760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b60648201526084015b60405180910390fd5b606061060a84845f85610612565b949350505050565b6060824710156106735760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b60648201526084016105f3565b5f80866001600160a01b0316858760405161068e919061092b565b5f6040518083038185875af1925050503d805f81146106c8576040519150601f19603f3d011682016040523d82523d5f602084013e6106cd565b606091505b5090925090506106df878383876106ea565b979650505050505050565b606083156107585782515f03610751576001600160a01b0385163b6107515760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e747261637400000060448201526064016105f3565b508161060a565b61060a838381511561076d5781518083602001fd5b8060405162461bcd60e51b81526004016105f3919061097c565b6001600160a01b038116811461079b575f80fd5b50565b805163ffffffff811681146107b1575f80fd5b919050565b634e487b7160e01b5f52604160045260245ffd5b5f5b838110156107e45781810151838201526020016107cc565b50505f910152565b5f805f805f8060c08789031215610801575f80fd5b865161080c81610787565b955061081a6020880161079e565b9450604087015161082a81610787565b606088015190945061083b81610787565b608088015190935061084c81610787565b60a08801519092506001600160401b0380821115610868575f80fd5b818901915089601f83011261087b575f80fd5b81518181111561088d5761088d6107b6565b604051601f8201601f19908116603f011681019083821181831017156108b5576108b56107b6565b816040528281528c60208487010111156108cd575f80fd5b6108de8360208301602088016107ca565b80955050505050509295509295509295565b5f60208284031215610900575f80fd5b815161090b81610787565b9392505050565b5f60208284031215610922575f80fd5b61090b8261079e565b5f825161093c8184602087016107ca565b9190910192915050565b5f60208284031215610956575f80fd5b5051919050565b5f6020828403121561096d575f80fd5b8151801515811461090b575f80fd5b602081525f825180602084015261099a8160408501602087016107ca565b601f01601f1916919091016040019291505056fea2646970667358221220aa39702a3fcaf1db02cf2f8545982cade42a924dfcfa2b74d2e15550bcd2772764736f6c634300081400330000000000000000000000002a3dd3eb832af982ec71669e178424b10dca2ede"
            );
            console.log("Implementation deployed!");
        } else {
            console.log("Implementation already deployed correctly!");
        }
        if (expectedProxy.code.length == 0) {
            (bool _successProxy, bytes memory _resProxy) = create2Deployer.call(
                hex"0000000000000000000000000000000000000000000000000000000000000001608060405234801562000010575f80fd5b5060405162000d6238038062000d62833981016040819052620000339162000403565b818160405180602001604052805f81525082816200005982825f6200007260201b60201c565b5062000067905082620000a3565b5050505050620004ae565b6200007d8362000114565b5f825111806200008a5750805b156200009e576200009c838362000155565b505b505050565b7f7e644d79422f17c01e4894b5f4f588d331ebfa28653d42ae832dc59e38c9798f620000e45f8051602062000d1b833981519152546001600160a01b031690565b604080516001600160a01b03928316815291841660208301520160405180910390a1620001118162000184565b50565b6200011f8162000221565b6040516001600160a01b038216907fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b905f90a250565b60606200017d838360405180606001604052806027815260200162000d3b60279139620002b8565b9392505050565b6001600160a01b038116620001ef5760405162461bcd60e51b815260206004820152602660248201527f455243313936373a206e65772061646d696e20697320746865207a65726f206160448201526564647265737360d01b60648201526084015b60405180910390fd5b805f8051602062000d1b8339815191525b80546001600160a01b0319166001600160a01b039290921691909117905550565b6001600160a01b0381163b620002905760405162461bcd60e51b815260206004820152602d60248201527f455243313936373a206e657720696d706c656d656e746174696f6e206973206e60448201526c1bdd08184818dbdb9d1c9858dd609a1b6064820152608401620001e6565b807f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc62000200565b60605f80856001600160a01b031685604051620002d691906200045d565b5f60405180830381855af49150503d805f811462000310576040519150601f19603f3d011682016040523d82523d5f602084013e62000315565b606091505b509092509050620003298683838762000333565b9695505050505050565b60608315620003a65782515f036200039e576001600160a01b0385163b6200039e5760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e74726163740000006044820152606401620001e6565b5081620003b2565b620003b28383620003ba565b949350505050565b815115620003cb5781518083602001fd5b8060405162461bcd60e51b8152600401620001e691906200047a565b80516001600160a01b0381168114620003fe575f80fd5b919050565b5f806040838503121562000415575f80fd5b6200042083620003e7565b91506200043060208401620003e7565b90509250929050565b5f5b83811015620004555781810151838201526020016200043b565b50505f910152565b5f82516200047081846020870162000439565b9190910192915050565b602081525f82518060208401526200049a81604085016020870162000439565b601f01601f19169190910160400192915050565b61085f80620004bc5f395ff3fe60806040523661001357610011610017565b005b6100115b61001f610168565b6001600160a01b0316330361015e5760606001600160e01b03195f35166364d3180d60e11b81016100595761005261019a565b9150610156565b63587086bd60e11b6001600160e01b0319821601610079576100526101ed565b63070d7c6960e41b6001600160e01b031982160161009957610052610231565b621eb96f60e61b6001600160e01b03198216016100b857610052610261565b63a39f25e560e01b6001600160e01b03198216016100d8576100526102a0565b60405162461bcd60e51b815260206004820152604260248201527f5472616e73706172656e745570677261646561626c6550726f78793a2061646d60448201527f696e2063616e6e6f742066616c6c6261636b20746f2070726f78792074617267606482015261195d60f21b608482015260a4015b60405180910390fd5b815160208301f35b6101666102b3565b565b5f7fb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d61035b546001600160a01b0316919050565b60606101a46102c3565b5f6101b23660048184610668565b8101906101bf91906106aa565b90506101da8160405180602001604052805f8152505f6102cd565b505060408051602081019091525f815290565b60605f806101fe3660048184610668565b81019061020b91906106d7565b9150915061021b828260016102cd565b60405180602001604052805f8152509250505090565b606061023b6102c3565b5f6102493660048184610668565b81019061025691906106aa565b90506101da816102f8565b606061026b6102c3565b5f610274610168565b604080516001600160a01b03831660208201529192500160405160208183030381529060405291505090565b60606102aa6102c3565b5f61027461034f565b6101666102be61034f565b61035d565b3415610166575f80fd5b6102d68361037b565b5f825111806102e25750805b156102f3576102f183836103ba565b505b505050565b7f7e644d79422f17c01e4894b5f4f588d331ebfa28653d42ae832dc59e38c9798f610321610168565b604080516001600160a01b03928316815291841660208301520160405180910390a161034c816103e6565b50565b5f61035861048f565b905090565b365f80375f80365f845af43d5f803e808015610377573d5ff35b3d5ffd5b610384816104b6565b6040516001600160a01b038216907fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b905f90a250565b60606103df83836040518060600160405280602781526020016108036027913961054a565b9392505050565b6001600160a01b03811661044b5760405162461bcd60e51b815260206004820152602660248201527f455243313936373a206e65772061646d696e20697320746865207a65726f206160448201526564647265737360d01b606482015260840161014d565b807fb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d61035b80546001600160a01b0319166001600160a01b039290921691909117905550565b5f7f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc61018b565b6001600160a01b0381163b6105235760405162461bcd60e51b815260206004820152602d60248201527f455243313936373a206e657720696d706c656d656e746174696f6e206973206e60448201526c1bdd08184818dbdb9d1c9858dd609a1b606482015260840161014d565b807f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc61046e565b60605f80856001600160a01b03168560405161056691906107b5565b5f60405180830381855af49150503d805f811461059e576040519150601f19603f3d011682016040523d82523d5f602084013e6105a3565b606091505b50915091506105b4868383876105be565b9695505050505050565b6060831561062c5782515f03610625576001600160a01b0385163b6106255760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640161014d565b5081610636565b610636838361063e565b949350505050565b81511561064e5781518083602001fd5b8060405162461bcd60e51b815260040161014d91906107d0565b5f8085851115610676575f80fd5b83861115610682575f80fd5b5050820193919092039150565b80356001600160a01b03811681146106a5575f80fd5b919050565b5f602082840312156106ba575f80fd5b6103df8261068f565b634e487b7160e01b5f52604160045260245ffd5b5f80604083850312156106e8575f80fd5b6106f18361068f565b9150602083013567ffffffffffffffff8082111561070d575f80fd5b818501915085601f830112610720575f80fd5b813581811115610732576107326106c3565b604051601f8201601f19908116603f0116810190838211818310171561075a5761075a6106c3565b81604052828152886020848701011115610772575f80fd5b826020860160208301375f6020848301015280955050505050509250929050565b5f5b838110156107ad578181015183820152602001610795565b50505f910152565b5f82516107c6818460208701610793565b9190910192915050565b602081525f82518060208401526107ee816040850160208701610793565b601f01601f1916919091016040019291505056fe416464726573733a206c6f772d6c6576656c2064656c65676174652063616c6c206661696c6564a264697066735822122090c67f34271adf7618e52e304fbd0dc3913a28a01d930d40f713eeb0bc4ec76d64736f6c63430008140033b53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d6103416464726573733a206c6f772d6c6576656c2064656c65676174652063616c6c206661696c65640000000000000000000000007babf98cb7cbd2c85f13813409f495b9cf0dd7d0000000000000000000000000242dae44f5d8fb54b198d03a94da45b5a4413e21"
            );
            console.log("Proxy deployed!");
        } else {
            console.log("Proxy already deployed correctly!");
        }
        vm.stopBroadcast();

        require(expectedImpl.code.length != 0, "Implementation not deployed correctly!");
        require(expectedProxy.code.length != 0, "Proxy not deployed correctly!");
    }
}
